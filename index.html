<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Smart Ordering System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f6f9;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1, h2, h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .nav {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 5px;
        }

            .nav button {
                background-color: #dc3545;
                color: white;
                border: none;
                padding: 8px 16px;
                cursor: pointer;
                border-radius: 4px;
                font-size: 14px;
            }

                .nav button:hover {
                    background-color: #c82333;
                }

        .form, .module {
            margin-bottom: 20px;
        }

            .form label, .module label {
                display: block;
                margin-bottom: 8px;
                font-weight: bold;
                color: #555;
            }

            .form input, .form select, .module input, .module select {
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 14px;
                box-sizing: border-box;
            }

                .form select[multiple] {
                    height: 100px;
                }

            .form button, .module button {
                background-color: #007bff;
                color: white;
                border: none;
                padding: 10px 20px;
                cursor: pointer;
                border-radius: 4px;
                font-size: 14px;
            }

                .form button:hover, .module button:hover {
                    background-color: #0056b3;
                }

        .error {
            color: #dc3545;
            margin-bottom: 15px;
            font-size: 14px;
            padding: 10px;
            background-color: #f8d7da;
            border-radius: 4px;
        }

        .success {
            color: #28a745;
            margin-bottom: 15px;
            font-size: 14px;
            padding: 10px;
            background-color: #d4edda;
            border-radius: 4px;
        }

        .module {
            display: none;
        }

            .module.active {
                display: block;
            }

        .module-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

            .module-nav button {
                background-color: #6c757d;
                color: white;
                padding: 8px 16px;
                border-radius: 4px;
            }

                .module-nav button:hover {
                    background-color: #5a6268;
                }

        .order-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

            .order-table th, .order-table td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }

            .order-table th {
                background-color: #007bff;
                color: white;
            }

            .order-table tr:hover {
                background-color: #f1f1f1;
            }

        .status-select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .quantity-input {
            width: 80px;
            margin-left: 10px;
            display: inline-block;
        }

        #voice-transcript, #voice-result, #feedback-result {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f9f9f9;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }

            .form input, .form select, .module input, .module select {
                font-size: 12px;
            }

            .order-table th, .order-table td {
                padding: 8px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <h1>Smart Ordering System</h1>
            <div id="user-info"></div>
            <button id="logout" style="display: none;">Logout</button>
        </div>
        <div id="error" class="error"></div>
        <div id="success" class="success" style="display: none;"></div>

        <div id="auth" class="form">
            <h2 id="auth-title">Login</h2>
            <form id="auth-form">
                <label for="username">Username</label>
                <input type="text" id="username" required>
                <label for="password">Password</label>
                <input type="password" id="password" required>
                <label for="role" id="role-label" style="display: none;">Role</label>
                <select id="role" style="display: none;">
                    <option value="Customer">Customer</option>
                    <option value="Admin">Admin</option>
                    <option value="Kitchen">Kitchen</option>
                </select>
                <button type="submit">Login</button>
            </form>
            <button id="toggle-auth">Need an account? Register</button>
        </div>

        <div id="dashboard" style="display: none;">
            <div class="module-nav">
                <button onclick="showModule('menu')">Menu</button>
                <button onclick="showModule('order')">Order</button>
                <button onclick="showModule('feedback')">Feedback</button>
                <button onclick="showModule('report')" id="report-btn" style="display: none;">Report</button>
                <button onclick="showModule('ai')">AI Features</button>
            </div>

            <div id="menu" class="module">
                <h2>Menu Management</h2>
                <div id="admin-menu-form" style="display: none;">
                    <label for="menu-name">Item Name</label>
                    <input type="text" id="menu-name">
                    <label for="menu-price">Price</label>
                    <input type="number" id="menu-price" step="0.01">
                    <button onclick="addMenuItem()">Add Item</button>
                </div>
                <table class="order-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Price</th>
                        </tr>
                    </thead>
                    <tbody id="menu-list"></tbody>
                </table>
            </div>

            <div id="order" class="module">
                <h2>Order Management</h2>
                <div id="customer-order-form" style="display: none;">
                    <h3>Customer Order</h3>
                    <label for="order-customer-name">Customer Name</label>
                    <input type="text" id="order-customer-name">
                    <label for="order-customer-phone">Customer Phone</label>
                    <input type="text" id="order-customer-phone">
                    <label for="order-items">Menu Items</label>
                    <select id="order-items" multiple></select>
                    <div id="quantity-controls"></div>
                    <button onclick="placeOrder()">Place Order</button>
                </div>
                <div id="call-order-form" style="display: none;">
                    <h3>Order via Call (Admin/Kitchen)</h3>
                    <label for="call-customer-name">Customer Name</label>
                    <input type="text" id="call-customer-name">
                    <label for="call-customer-phone">Customer Phone</label>
                    <input type="text" id="call-customer-phone">
                    <label for="call-order-items">Menu Items</label>
                    <select id="call-order-items" multiple></select>
                    <div id="call-quantity-controls"></div>
                    <button onclick="placeCallOrder()">Place Call Order</button>
                </div>
                <h3>Order List</h3>
                <table class="order-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Items</th>
                            <th>Total</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="order-list"></tbody>
                </table>
            </div>

            <div id="feedback" class="module">
                <h2>Feedback</h2>
                <div id="error" style="color: red; display: none;"></div>
                <div id="success" style="color: green; display: none;"></div>
                <form id="customer-feedback-form" style="display: none;">
                    <label for="feedback-order-id">Order ID:</label>
                    <input type="number" id="feedback-order-id" value="1" min="1">
                    <label for="feedback-rating">Rating (1-5):</label>
                    <input type="number" id="feedback-rating" value="4" min="1" max="5">
                    <label for="feedback-comment">Feedback:</label>
                    <textarea id="feedback-comment" name="feedback" placeholder="Enter your feedback"></textarea>
                    <button type="button" onclick="submitFeedback()">Submit Feedback</button>
                </form>
                <table id="feedback-list">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Rating</th>
                            <th>Feedback</th>
                            <th>Sentiment</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="report" class="module">
                <h2>Report Generation</h2>
                <button onclick="fetchReport()">View Report</button>
                <button onclick="downloadReport('daily-summary')">Download Daily Summary</button>
                <div>
                    <label for="invoice-order-id">Order ID for Invoice</label>
                    <input type="number" id="invoice-order-id" value="1">
                    <button onclick="downloadReport('order-invoice/' + document.getElementById('invoice-order-id').value)">Download Order Invoice</button>
                </div>
                <pre id="report-result"></pre>
            </div>

            <div id="ai" class="module">
                <h2>AI Features</h2>
                <div>
                    <h3>Voice Order Parsing</h3>
                    <button onclick="startVoiceRecording()">Record Voice</button>
                    <button onclick="retryVoiceRecording()">Retry Recording</button>
                    <label for="voice-input">Manual Order Input (if voice fails)</label>
                    <input type="text" id="voice-input" placeholder="e.g., two zinger burgers and one fries">
                    <div id="voice-transcript"></div>
                    <div id="voice-confidence"></div>
                    <button onclick="parseVoiceOrder()">Parse and Place Order</button>
                    <div id="voice-result"></div>
                </div>
                <div>
                    <h3>Feedback Analysis</h3>
                    <input type="text" id="feedback-input" placeholder="e.g., Burger was great, fries were cold">
                    <button onclick="analyzeFeedback()">Analyze Feedback</button>
                    <div id="feedback-result"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>